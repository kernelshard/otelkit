
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Complete API reference for the otelkit Go library">
      
      
      
      
        <link rel="prev" href="../GETTING_STARTED/">
      
      
        <link rel="next" href="../ADVANCED_USAGE/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.21">
    
    
      
        <title>API Reference - otelkit</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2a3383ac.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#otelkit-api-reference" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="otelkit" class="md-header__button md-logo" aria-label="otelkit" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            otelkit
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              API Reference
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="otelkit" class="md-nav__button md-logo" aria-label="otelkit" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    otelkit
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../GETTING_STARTED/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#constants" class="md-nav__link">
    <span class="md-ellipsis">
      Constants
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Constants">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#service-configuration-constants" class="md-nav__link">
    <span class="md-ellipsis">
      Service Configuration Constants
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opentelemetry-semantic-convention-constants" class="md-nav__link">
    <span class="md-ellipsis">
      OpenTelemetry Semantic Convention Constants
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-message-constants" class="md-nav__link">
    <span class="md-ellipsis">
      Error Message Constants
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-variable-constants" class="md-nav__link">
    <span class="md-ellipsis">
      Environment Variable Constants
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variables" class="md-nav__link">
    <span class="md-ellipsis">
      Variables
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Variables">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#valid-configuration-options" class="md-nav__link">
    <span class="md-ellipsis">
      Valid Configuration Options
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#addattributes" class="md-nav__link">
    <span class="md-ellipsis">
      AddAttributes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addevent" class="md-nav__link">
    <span class="md-ellipsis">
      AddEvent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addtimedevent" class="md-nav__link">
    <span class="md-ellipsis">
      AddTimedEvent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#endspan" class="md-nav__link">
    <span class="md-ellipsis">
      EndSpan
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extracttracecontext" class="md-nav__link">
    <span class="md-ellipsis">
      ExtractTraceContext
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#injecttracecontext" class="md-nav__link">
    <span class="md-ellipsis">
      InjectTraceContext
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#injecttraceidintocontext" class="md-nav__link">
    <span class="md-ellipsis">
      InjectTraceIDIntoContext
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#isrecording" class="md-nav__link">
    <span class="md-ellipsis">
      IsRecording
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mustsetuptracing" class="md-nav__link">
    <span class="md-ellipsis">
      MustSetupTracing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#newconfigerror" class="md-nav__link">
    <span class="md-ellipsis">
      NewConfigError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#newdefaultprovider" class="md-nav__link">
    <span class="md-ellipsis">
      NewDefaultProvider
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#newinitializationerror" class="md-nav__link">
    <span class="md-ellipsis">
      NewInitializationError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#newinstrumentedgrpcclientdialoptions" class="md-nav__link">
    <span class="md-ellipsis">
      NewInstrumentedGRPCClientDialOptions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#newinstrumentedgrpcserver" class="md-nav__link">
    <span class="md-ellipsis">
      NewInstrumentedGRPCServer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#newinstrumentedhttpclient" class="md-nav__link">
    <span class="md-ellipsis">
      NewInstrumentedHTTPClient
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#newinstrumentedhttphandler" class="md-nav__link">
    <span class="md-ellipsis">
      NewInstrumentedHTTPHandler
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#newpropagationerror" class="md-nav__link">
    <span class="md-ellipsis">
      NewPropagationError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#newprovider" class="md-nav__link">
    <span class="md-ellipsis">
      NewProvider
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recorderror" class="md-nav__link">
    <span class="md-ellipsis">
      RecordError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setglobaltracerprovider" class="md-nav__link">
    <span class="md-ellipsis">
      SetGlobalTracerProvider
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setupcustomtracing" class="md-nav__link">
    <span class="md-ellipsis">
      SetupCustomTracing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setuptracing" class="md-nav__link">
    <span class="md-ellipsis">
      SetupTracing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#traceidfromcontext" class="md-nav__link">
    <span class="md-ellipsis">
      TraceIDFromContext
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#types" class="md-nav__link">
    <span class="md-ellipsis">
      Types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#config" class="md-nav__link">
    <span class="md-ellipsis">
      Config
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#newconfig" class="md-nav__link">
    <span class="md-ellipsis">
      NewConfig
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#newconfigfromenv" class="md-nav__link">
    <span class="md-ellipsis">
      NewConfigFromEnv
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validate" class="md-nav__link">
    <span class="md-ellipsis">
      Validate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADVANCED_USAGE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Advanced Usage
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION_GUIDES/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Integration Guides
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION_TESTING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Integration Testing
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../MIGRATION_GUIDE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Migration Guide
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../TROUBLESHOOTING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Troubleshooting
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#constants" class="md-nav__link">
    <span class="md-ellipsis">
      Constants
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Constants">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#service-configuration-constants" class="md-nav__link">
    <span class="md-ellipsis">
      Service Configuration Constants
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opentelemetry-semantic-convention-constants" class="md-nav__link">
    <span class="md-ellipsis">
      OpenTelemetry Semantic Convention Constants
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-message-constants" class="md-nav__link">
    <span class="md-ellipsis">
      Error Message Constants
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-variable-constants" class="md-nav__link">
    <span class="md-ellipsis">
      Environment Variable Constants
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variables" class="md-nav__link">
    <span class="md-ellipsis">
      Variables
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Variables">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#valid-configuration-options" class="md-nav__link">
    <span class="md-ellipsis">
      Valid Configuration Options
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#addattributes" class="md-nav__link">
    <span class="md-ellipsis">
      AddAttributes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addevent" class="md-nav__link">
    <span class="md-ellipsis">
      AddEvent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addtimedevent" class="md-nav__link">
    <span class="md-ellipsis">
      AddTimedEvent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#endspan" class="md-nav__link">
    <span class="md-ellipsis">
      EndSpan
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extracttracecontext" class="md-nav__link">
    <span class="md-ellipsis">
      ExtractTraceContext
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#injecttracecontext" class="md-nav__link">
    <span class="md-ellipsis">
      InjectTraceContext
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#injecttraceidintocontext" class="md-nav__link">
    <span class="md-ellipsis">
      InjectTraceIDIntoContext
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#isrecording" class="md-nav__link">
    <span class="md-ellipsis">
      IsRecording
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mustsetuptracing" class="md-nav__link">
    <span class="md-ellipsis">
      MustSetupTracing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#newconfigerror" class="md-nav__link">
    <span class="md-ellipsis">
      NewConfigError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#newdefaultprovider" class="md-nav__link">
    <span class="md-ellipsis">
      NewDefaultProvider
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#newinitializationerror" class="md-nav__link">
    <span class="md-ellipsis">
      NewInitializationError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#newinstrumentedgrpcclientdialoptions" class="md-nav__link">
    <span class="md-ellipsis">
      NewInstrumentedGRPCClientDialOptions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#newinstrumentedgrpcserver" class="md-nav__link">
    <span class="md-ellipsis">
      NewInstrumentedGRPCServer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#newinstrumentedhttpclient" class="md-nav__link">
    <span class="md-ellipsis">
      NewInstrumentedHTTPClient
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#newinstrumentedhttphandler" class="md-nav__link">
    <span class="md-ellipsis">
      NewInstrumentedHTTPHandler
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#newpropagationerror" class="md-nav__link">
    <span class="md-ellipsis">
      NewPropagationError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#newprovider" class="md-nav__link">
    <span class="md-ellipsis">
      NewProvider
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recorderror" class="md-nav__link">
    <span class="md-ellipsis">
      RecordError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setglobaltracerprovider" class="md-nav__link">
    <span class="md-ellipsis">
      SetGlobalTracerProvider
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setupcustomtracing" class="md-nav__link">
    <span class="md-ellipsis">
      SetupCustomTracing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setuptracing" class="md-nav__link">
    <span class="md-ellipsis">
      SetupTracing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#traceidfromcontext" class="md-nav__link">
    <span class="md-ellipsis">
      TraceIDFromContext
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#types" class="md-nav__link">
    <span class="md-ellipsis">
      Types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#config" class="md-nav__link">
    <span class="md-ellipsis">
      Config
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#newconfig" class="md-nav__link">
    <span class="md-ellipsis">
      NewConfig
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#newconfigfromenv" class="md-nav__link">
    <span class="md-ellipsis">
      NewConfigFromEnv
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validate" class="md-nav__link">
    <span class="md-ellipsis">
      Validate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="otelkit-api-reference">otelkit API Reference</h1>
<p>package otelkit // import "github.com/kernelshard/otelkit"</p>
<p>Package otelkit provides HTTP middleware for automatic request tracing.
The middleware integrates seamlessly with any HTTP framework that supports
the standard http.Handler interface, including gorilla/mux, chi, gin, echo,
and others.</p>
<p>Package otelkit provides OpenTelemetry tracer provider configuration and
initialization. This file contains the core provider setup that configures
exporters, sampling, resource identification, and batch processing for the
entire tracing system.</p>
<p>Package tracer provides span utility functions for OpenTelemetry tracing.
These utilities offer safe, convenient methods for common span operations with
built-in nil checks and error handling.</p>
<h2 id="constants">Constants</h2>
<h3 id="service-configuration-constants">Service Configuration Constants</h3>
<pre><code class="language-go">const (
    DefaultServiceName          = &quot;unknown-service&quot;
    DefaultServiceVersion       = &quot;1.0.0&quot;
    DefaultEnvironment          = &quot;development&quot;
    DefaultOTLPExporterEndpoint = &quot;localhost:4317&quot;
    DefaultSamplingRatio        = 0.2
    DefaultSamplingType         = &quot;probabilistic&quot;
    DefaultOTLPExporterProtocol = &quot;grpc&quot;
    DefaultBatchTimeout         = 5 * time.Second
    DefaultExportTimeout        = 30 * time.Second
    DefaultMaxExportBatchSize   = 512
    DefaultMaxQueueSize         = 2048
)
</code></pre>
<h3 id="opentelemetry-semantic-convention-constants">OpenTelemetry Semantic Convention Constants</h3>
<pre><code class="language-go">const (
    AttrHTTPMethod     = &quot;http.method&quot;
    AttrHTTPURL        = &quot;http.url&quot;
    AttrHTTPUserAgent  = &quot;http.user_agent&quot;
    AttrHTTPStatusCode = &quot;http.status_code&quot;
)
</code></pre>
<h3 id="error-message-constants">Error Message Constants</h3>
<pre><code class="language-go">const (
    ErrServiceNameRequired     = &quot;service name is required&quot;
    ErrServiceVersionRequired  = &quot;service version is required&quot;
    ErrInvalidEnvironment      = &quot;invalid environment&quot;
    ErrInvalidSamplingType     = &quot;invalid sampling type&quot;
    ErrInvalidSamplingRatio    = &quot;sampling ratio must be between 0 and 1&quot;
    ErrInvalidExporterProtocol = &quot;invalid exporter protocol&quot;
    ErrInvalidExporterEndpoint = &quot;exporter endpoint is required&quot;
)
</code></pre>
<h3 id="environment-variable-constants">Environment Variable Constants</h3>
<pre><code class="language-go">const (
    EnvServiceName          = &quot;OTEL_SERVICE_NAME&quot;
    EnvServiceVersion       = &quot;OTEL_SERVICE_VERSION&quot;
    EnvEnvironment          = &quot;OTEL_ENVIRONMENT&quot;
    EnvOTLPExporterEndpoint = &quot;OTEL_EXPORTER_OTLP_ENDPOINT&quot;
    EnvOTLPExporterInsecure = &quot;OTEL_EXPORTER_OTLP_INSECURE&quot;
    EnvOTLPExporterProtocol = &quot;OTEL_EXPORTER_OTLP_PROTOCOL&quot;
    EnvBatchTimeout         = &quot;OTEL_BSP_TIMEOUT&quot;
    EnvExportTimeout        = &quot;OTEL_EXPORTER_TIMEOUT&quot;
    EnvMaxExportBatchSize   = &quot;OTEL_BSP_MAX_EXPORT_BATCH_SIZE&quot;
    EnvMaxQueueSize         = &quot;OTEL_BSP_MAX_QUEUE_SIZE&quot;
    EnvSamplingType         = &quot;OTEL_TRACES_SAMPLER&quot;
    EnvSamplingRatio        = &quot;OTEL_TRACES_SAMPLER_ARG&quot;
    EnvInstanceID           = &quot;OTEL_RESOURCE_ATTRIBUTES_SERVICE_INSTANCE_ID&quot;
)
</code></pre>
<h2 id="variables">Variables</h2>
<h3 id="valid-configuration-options">Valid Configuration Options</h3>
<pre><code class="language-go">var (
    ValidEnvironments  = []string{&quot;development&quot;, &quot;staging&quot;, &quot;production&quot;}
    ValidSamplingTypes = []string{&quot;probabilistic&quot;, &quot;always_on&quot;, &quot;always_off&quot;}
    ValidHTTPMethods   = []string{
        http.MethodHead, http.MethodPost, http.MethodPut,
        http.MethodDelete, http.MethodPatch, http.MethodHead, http.MethodOptions,
    }
    ValidOTLPProtocols = []string{&quot;grpc&quot;, &quot;http&quot;}
)
</code></pre>
<h2 id="functions">Functions</h2>
<h3 id="addattributes">AddAttributes</h3>
<pre><code class="language-go">func AddAttributes(span trace.Span, attrs ...attribute.KeyValue)
</code></pre>
<p>AddAttributes safely adds one or more attributes to the given span. If the
span is nil, this function is a no-op. This is useful for adding contextual
information to spans such as user IDs, request parameters, or business logic
details.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-go">AddAttributes(span,
    attribute.String(&quot;user.id&quot;, &quot;12345&quot;),
    attribute.Int(&quot;request.size&quot;, 1024),
    attribute.Bool(&quot;cache.hit&quot;, true),
)
</code></pre>
<h3 id="addevent">AddEvent</h3>
<pre><code class="language-go">func AddEvent(span trace.Span, name string, attrs ...attribute.KeyValue)
</code></pre>
<p>AddEvent safely adds a named event with optional attributes to the span.
Events are timestamped markers that can help understand the flow of
execution. If the span is nil, this function is a no-op.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-go">AddEvent(span, &quot;cache.miss&quot;,
    attribute.String(&quot;key&quot;, cacheKey),
    attribute.String(&quot;reason&quot;, &quot;expired&quot;),
)
</code></pre>
<h3 id="addtimedevent">AddTimedEvent</h3>
<pre><code class="language-go">func AddTimedEvent(span trace.Span, name string, duration time.Duration)
</code></pre>
<p>AddTimedEvent adds an event with duration information to the span. This is
useful for recording the time taken for specific operations within a larger
span. The duration is added as a string attribute.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-go">start := time.Now()
// ... perform operation
AddTimedEvent(span, &quot;database.query&quot;, time.Since(start))
</code></pre>
<h3 id="endspan">EndSpan</h3>
<pre><code class="language-go">func EndSpan(span trace.Span)
</code></pre>
<p>EndSpan safely ends the given span. If the span is nil, this function is
a no-op. This provides a safe way to end spans without worrying about nil
checks.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-go">defer EndSpan(span)
</code></pre>
<h3 id="extracttracecontext">ExtractTraceContext</h3>
<pre><code class="language-go">func ExtractTraceContext(req *http.Request) context.Context
</code></pre>
<p>ExtractTraceContext extracts trace context from HTTP request headers into
the context.</p>
<h3 id="injecttracecontext">InjectTraceContext</h3>
<pre><code class="language-go">func InjectTraceContext(ctx context.Context, req *http.Request)
</code></pre>
<p>InjectTraceContext injects the current trace context into the HTTP request
headers.</p>
<h3 id="injecttraceidintocontext">InjectTraceIDIntoContext</h3>
<pre><code class="language-go">func InjectTraceIDIntoContext(ctx context.Context, span trace.Span) context.Context
</code></pre>
<p>InjectTraceIDIntoContext adds trace ID into the context (as a new value).</p>
<h3 id="isrecording">IsRecording</h3>
<pre><code class="language-go">func IsRecording(span trace.Span) bool
</code></pre>
<p>IsRecording checks if the span is currently recording telemetry data.
Returns false if the span is nil or if the span context is invalid. This
can be used to avoid expensive operations when tracing is disabled or when
working with noop spans.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-go">if IsRecording(span) {
    // Perform expensive attribute computation
    span.SetAttributes(expensiveAttributes()...)
}
</code></pre>
<h3 id="mustsetuptracing">MustSetupTracing</h3>
<pre><code class="language-go">func MustSetupTracing(ctx context.Context, serviceName string, serviceVersion ...string) func(context.Context) error
</code></pre>
<p>MustSetupTracing is like SetupTracing but panics on error. Use this for
simple programs where you want to fail fast.</p>
<h3 id="newconfigerror">NewConfigError</h3>
<pre><code class="language-go">func NewConfigError(field, message string) error
</code></pre>
<p>NewConfigError creates a new ConfigError.</p>
<h3 id="newdefaultprovider">NewDefaultProvider</h3>
<pre><code class="language-go">func NewDefaultProvider(ctx context.Context, serviceName string, serviceVersion ...string) (*sdktrace.TracerProvider, error)
</code></pre>
<p>NewDefaultProvider creates a tracer provider with default settings and sets
it as the global provider. This is a convenience function for quick setup in
development or simple applications. It creates a provider with opinionated
defaults:
- HTTP OTLP exporter to localhost:4318 (insecure)
- Probabilistic sampling at the default rate (typically 20%)
- Standard batch processing settings
- Automatic resource detection for service identification</p>
<p>The provider is set as the global OpenTelemetry provider (only once per
application). For production use or when you need custom configuration,
use NewProvider with NewProviderConfig.</p>
<p><strong>Note:</strong> This is the function most users will start with. It's designed to
"just work" for local development and testing scenarios.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-go">provider, err := tracer.NewDefaultProvider(ctx, &quot;my-service&quot;, &quot;v1.0.0&quot;)
if err != nil {
    log.Fatal(err)
}
defer provider.Shutdown(ctx)
</code></pre>
<h3 id="newinitializationerror">NewInitializationError</h3>
<pre><code class="language-go">func NewInitializationError(component string, cause error) error
</code></pre>
<p>NewInitializationError creates a new InitializationError.</p>
<h3 id="newinstrumentedgrpcclientdialoptions">NewInstrumentedGRPCClientDialOptions</h3>
<pre><code class="language-go">func NewInstrumentedGRPCClientDialOptions() []grpc.DialOption
</code></pre>
<p>NewInstrumentedGRPCClientDialOptions returns grpc.DialOption slice with
OpenTelemetry instrumentation for client connections. Use this in grpc.Dial
for instrumented client connections.</p>
<h3 id="newinstrumentedgrpcserver">NewInstrumentedGRPCServer</h3>
<pre><code class="language-go">func NewInstrumentedGRPCServer(opts ...grpc.ServerOption) *grpc.Server
</code></pre>
<p>NewInstrumentedGRPCServer creates a new gRPC server with OpenTelemetry unary
and stream interceptors attached automatically.</p>
<h3 id="newinstrumentedhttpclient">NewInstrumentedHTTPClient</h3>
<pre><code class="language-go">func NewInstrumentedHTTPClient(baseTransport http.RoundTripper) *http.Client
</code></pre>
<p>NewInstrumentedHTTPClient returns an *http.Client with OpenTelemetry
transport for automatic HTTP tracing. You can customize it by passing a base
transport; if nil, http.DefaultTransport is used.</p>
<h3 id="newinstrumentedhttphandler">NewInstrumentedHTTPHandler</h3>
<pre><code class="language-go">func NewInstrumentedHTTPHandler(handler http.Handler, operationName string) http.Handler
</code></pre>
<p>NewInstrumentedHTTPHandler wraps an http.Handler with OpenTelemetry
instrumentation and returns the wrapped handler. Usage: http.Handle("/path",
NewInstrumentedHTTPHandler(yourHandler, "operationName"))</p>
<h3 id="newpropagationerror">NewPropagationError</h3>
<pre><code class="language-go">func NewPropagationError(operation string, cause error) error
</code></pre>
<p>NewPropagationError creates a new PropagationError.</p>
<h3 id="newprovider">NewProvider</h3>
<pre><code class="language-go">func NewProvider(ctx context.Context, cfg *ProviderConfig) (*sdktrace.TracerProvider, error)
</code></pre>
<p>NewProvider creates and configures a new TracerProvider using the provided
configuration, then sets it as the global OpenTelemetry provider (only
once per application lifecycle). This is the recommended way to initialize
tracing when you need custom configuration.</p>
<p>The function ensures that the global provider is set only once, even if
called multiple times. This prevents conflicts and ensures consistent
tracing behavior across the application.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-go">config := tracer.NewProviderConfig(&quot;payment-service&quot;, &quot;v1.2.3&quot;).
    WithOTLPExporter(&quot;https://api.honeycomb.io&quot;, &quot;http&quot;, false).
    WithSampling(&quot;probabilistic&quot;, 0.05)

provider, err := tracer.NewProvider(ctx, config)
if err != nil {
    log.Fatal(err)
}
defer provider.Shutdown(ctx)
</code></pre>
<h3 id="recorderror">RecordError</h3>
<pre><code class="language-go">func RecordError(span trace.Span, err error)
</code></pre>
<p>RecordError safely records an error on the span and sets the span status
to error. This function handles nil checks for both span and error. When
an error is recorded, the span status is automatically set to codes.Error
with the error message. This is essential for proper error tracking in
distributed tracing.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-go">if err := doSomething(); err != nil {
    RecordError(span, err)
    return err
}
</code></pre>
<h3 id="setglobaltracerprovider">SetGlobalTracerProvider</h3>
<pre><code class="language-go">func SetGlobalTracerProvider(tp trace.TracerProvider)
</code></pre>
<p>SetGlobalTracerProvider sets the global OpenTelemetry tracer provider.
This should typically be called once during application initialization.
All subsequent tracer instances will use this provider.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-go">provider := setupTracerProvider()
tracer.SetGlobalTracerProvider(provider)
</code></pre>
<h3 id="setupcustomtracing">SetupCustomTracing</h3>
<pre><code class="language-go">func SetupCustomTracing(ctx context.Context, cfg *ProviderConfig) (*sdktrace.TracerProvider, error)
</code></pre>
<p>SetupCustomTracing provides full control over the tracing setup. Use this
when you need custom configuration that goes beyond environment variables.</p>
<h3 id="setuptracing">SetupTracing</h3>
<pre><code class="language-go">func SetupTracing(ctx context.Context, serviceName string, serviceVersion ...string) (func(context.Context) error, error)
</code></pre>
<p>SetupTracing initializes OpenTelemetry tracing with sensible defaults.
This is the simplest way to get started with tracing.</p>
<p><strong>Example:</strong></p>
<pre><code class="language-go">shutdown, err := tracer.SetupTracing(ctx, &quot;my-service&quot;)
if err != nil {
    log.Fatal(err)
}
defer shutdown(ctx)
</code></pre>
<p>The function reads configuration from environment variables and sets up:
- OTLP exporter (HTTP by default, localhost:4318)
- Probabilistic sampling (20% by default)
- Batch span processor with sensible defaults
- Resource
    with service information</p>
<p>func SetupTracingWithDefaults(ctx context.Context, serviceName, serviceVersion string) (func(context.Context) error, error)
    SetupTracingWithDefaults initializes tracing with hardcoded defaults.
    This is useful for quick setup without environment variables.</p>
<pre><code>It uses: - HTTP OTLP exporter to localhost:4318 (insecure) - Probabilistic
sampling at 20% - Standard batch processing settings
</code></pre>
<p>func ShutdownTracerProvider(ctx context.Context, tp *sdktrace.TracerProvider) error
    ShutdownTracerProvider gracefully shuts down the tracer provider,
    ensuring all pending spans are exported before the application terminates.
    This function should be called during application shutdown, typically with a
    context that has a reasonable timeout.</p>
<pre><code>The shutdown process:
 1. Stops accepting new spans
 2. Exports all remaining spans in the queue
 3. Closes the exporter connection
 4. Releases any resources held by the provider

Example:

    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)
    defer cancel()

    if err := tracer.ShutdownTracerProvider(ctx, provider); err != nil {
        log.Printf("Error during tracer shutdown: %v", err)
    }
</code></pre>
<h3 id="traceidfromcontext">TraceIDFromContext</h3>
<pre><code class="language-go">func TraceIDFromContext(ctx context.Context) string
</code></pre>
<p>TraceIDFromContext tries to retrieve trace ID from context.</p>
<h2 id="types">Types</h2>
<h3 id="config">Config</h3>
<pre><code class="language-go">type Config struct {
    // Service identification metadata
    ServiceName    string // Name of the service (required)
    ServiceVersion string // Version of the service (required)
    Environment    string // Deployment environment (development/staging/production)

    // OTLP exporter settings
    OTLPExporterEndpoint string // Collector endpoint (host:port)
    OTLPExporterInsecure bool   // Disable TLS verification
    OTLPExporterProtocol string // Protocol for OTLP exporter (default: grpc)

    // Batch processing configuration
    BatchTimeout       time.Duration // Timeout for batch processing (default: 5s)
    ExportTimeout      time.Duration // Timeout for export requests (default: 30s)
    MaxExportBatchSize int           // Maximum batch size for exports (default: 512)
    MaxQueueSize       int           // Maximum queue size for spans (default: 2048)

    // Sampling configuration
    SamplingRatio float64 // Ratio of traces to sample (0.0 - 1.0)
    SamplingType  string  // Sampling strategy

    // Resource attributes
    InstanceID string // Unique instance identifier
    Hostname   string // Host machine name
}
</code></pre>
<p>Config defines tracing configuration parameters</p>
<h4 id="newconfig">NewConfig</h4>
<pre><code class="language-go">func NewConfig(serviceName, serviceVersion string) *Config
</code></pre>
<p>NewConfig creates a configuration with sensible defaults</p>
<h4 id="newconfigfromenv">NewConfigFromEnv</h4>
<pre><code class="language-go">func NewConfigFromEnv() *Config
</code></pre>
<p>NewConfigFromEnv creates configuration from environment variables</p>
<h4 id="validate">Validate</h4>
<pre><code class="language-go">func (c *Config) Validate() error
</code></pre>
<p>Validate ensures configuration parameters are correct
    Validate ensures configuration parameters are correct</p>
<p>func (c <em>Config) WithEnvironment(env string) </em>Config
    WithEnvironment sets the deployment environment</p>
<p>func (c <em>Config) WithOTLPExporter(endpoint string, insecure bool, protocol string) </em>Config
    WithOTLPExporter configures the OTLP exporter (endpoint, insecure mode,
    and protocol)</p>
<p>func (c <em>Config) WithSampling(samplingType string, ratio float64) </em>Config
    WithSampling configures the sampling strategy</p>
<p>type ConfigError struct {
    Field   string
    Message string
}
    ConfigError represents a validation error in configuration.</p>
<p>func (e *ConfigError) Error() string
    Error returns a string representation of the error.</p>
<p>type HTTPMiddleware struct {
    // Has unexported fields.
}
    HTTPMiddleware provides HTTP middleware for automatic request tracing.
    It extracts trace context from incoming requests, creates server spans,
    and automatically records HTTP-specific attributes like method, URL, status
    code, and user agent. The middleware handles trace context propagation
    according to W3C Trace Context and B3 propagation standards.</p>
<pre><code>The middleware is compatible with any HTTP framework that uses the standard
http.Handler interface.
</code></pre>
<p>func NewHttpMiddleware(tracer <em>Tracer) </em>HTTPMiddleware
    NewHttpMiddleware creates a new HTTPMiddleware instance using the provided
    Tracer. The tracer will be used to create spans for all incoming HTTP
    requests.</p>
<pre><code>Example:

    tracer := otelkit.New("http-service")
    middleware := tracer.NewHttpMiddleware(tracer)

    // With gorilla/mux
    r := mux.NewRouter()
    r.Use(middleware.Middleware)

    // With chi
    r := chi.NewRouter()
    r.Use(middleware.Middleware)

    // With standard http.ServeMux
    mux := http.NewServeMux()
    handler := middleware.Middleware(mux)
</code></pre>
<p>func (m *HTTPMiddleware) Middleware(next http.Handler) http.Handler
    Middleware returns an HTTP handler middleware function that automatically
    traces incoming requests.</p>
<pre><code>The middleware performs the following operations:
 1. Extracts trace context from incoming request headers (supports W3C Trace
    Context and B3)
 2. Creates a new server span with operation name "METHOD /path"
 3. Adds standard HTTP attributes: method, URL, user agent
 4. Wraps the response writer to capture the HTTP status code
 5. Propagates the trace context to downstream handlers
 6. Records the final HTTP status code when the request completes

Example usage:

    middleware := tracer.NewHttpMiddleware(tracer)

    http.Handle("/api/", middleware.Middleware(apiHandler))

    // Or with a router:
    r := mux.NewRouter()
    r.Use(middleware.Middleware)
    r.HandleFunc("/users/{id}", getUserHandler)
</code></pre>
<p>type InitializationError struct {
    Component string
    Cause     error
}
    InitializationError wraps failures during component setup.</p>
<p>func (e *InitializationError) Error() string
    Error returns a string representation of the error.</p>
<p>func (e *InitializationError) Unwrap() error
    Unwrap returns the underlying error.</p>
<p>type PropagationError struct {
    Operation string
    Cause     error
}
    PropagationError wraps errors related to context propagation.</p>
<p>func (e *PropagationError) Error() string
    Error returns a string representation of the error.</p>
<p>func (e *PropagationError) Unwrap() error
    Unwrap returns the underlying error.</p>
<p>type ProviderConfig struct {
    // Config contains the core tracing configuration including service identification,
    // exporter settings, and sampling strategy.
    Config *Config</p>
<pre><code>// Resource provides custom resource attributes for service identification.
// If nil, a default resource will be created using service name, version,
// environment, hostname, and instance ID from Config.
Resource *sdkresource.Resource

// BatchTimeout is the maximum time the batch processor waits before
// exporting spans. Lower values reduce latency but may increase overhead.
// Default: 5 seconds.
BatchTimeout time.Duration

// ExportTimeout is the maximum time allowed for exporting a batch of spans.
// Exports exceeding this timeout will be cancelled. Default: 30 seconds.
ExportTimeout time.Duration

// MaxExportBatchSize is the maximum number of spans to export in a single batch.
// Larger batches improve throughput but use more memory. Default: 512.
MaxExportBatchSize int

// MaxQueueSize is the maximum number of spans that can be queued for export.
// When the queue is full, new spans will be dropped. Default: 2048.
MaxQueueSize int
</code></pre>
<p>}
    ProviderConfig holds comprehensive configuration for creating a
    TracerProvider. It combines basic tracing configuration with advanced
    options for batch processing, resource identification, and performance
    tuning. This allows fine-grained control over the tracing pipeline behavior.</p>
<pre><code>The configuration supports fluent method chaining for ease of use:

    config := tracer.NewProviderConfig("my-service", "v1.0.0").
        WithOTLPExporter("localhost:4317", "grpc", true).
        WithSampling("probabilistic", 0.1).
        WithBatchOptions(5*time.Second, 30*time.Second, 512, 2048)
</code></pre>
<p>func NewProviderConfig(serviceName, serviceVersion string) *ProviderConfig
    NewProviderConfig creates a new ProviderConfig with sensible defaults for
    advanced configuration. It initializes the configuration with default batch
    processing settings and creates a base Config using the provided service
    name and version. The returned config supports fluent method chaining for
    customization.</p>
<pre><code>Default settings:
  - BatchTimeout: 5 seconds
  - ExportTimeout: 30 seconds
  - MaxExportBatchSize: 512 spans
  - MaxQueueSize: 2048 spans
  - OTLP HTTP exporter pointing to localhost:4318
  - Probabilistic sampling at 20%

Example:

    config := tracer.NewProviderConfig("user-service", "v2.1.0")
    provider, err := tracer.NewProvider(ctx, config)
</code></pre>
<p>func (pc <em>ProviderConfig) WithBatchOptions(batchTimeout, exportTimeout time.Duration, maxExportBatchSize, maxQueueSize int) </em>ProviderConfig
    WithBatchOptions configures the batch processor settings for span export
    optimization. These settings control how spans are batched and exported,
    affecting both performance and resource usage. Tune these values based on
    your application's traffic patterns and latency requirements.</p>
<pre><code>Parameters:
  - batchTimeout: Maximum time to wait before exporting (lower = less
    latency, higher = better throughput)
  - exportTimeout: Maximum time allowed for export operations (prevents
    hanging exports)
  - maxExportBatchSize: Maximum spans per batch (higher = better throughput,
    more memory usage)
  - maxQueueSize: Maximum queued spans before dropping (higher = more
    memory, less data loss)

Example:

    // Low-latency configuration
    config.WithBatchOptions(1*time.Second, 10*time.Second, 256, 1024)

    // High-throughput configuration
    config.WithBatchOptions(10*time.Second, 60*time.Second, 1024, 4096)
</code></pre>
<p>func (pc <em>ProviderConfig) WithOTLPExporter(endpoint, protocol string, insecure bool) </em>ProviderConfig
    WithOTLPExporter configures the OTLP exporter settings for trace export.
    This method allows you to specify the endpoint, protocol, and security
    settings for sending traces to an OTLP-compatible backend.</p>
<pre><code>Parameters:
  - endpoint: The URL or address of the OTLP collector (e.g.,
    "localhost:4317", "https://api.honeycomb.io")
  - protocol: Either "grpc" for gRPC transport or "http" for HTTP transport
  - insecure: true to disable TLS (for development), false to use TLS (for
    production)

Example:

    config.WithOTLPExporter("https://api.honeycomb.io", "http", false)
    config.WithOTLPExporter("localhost:4317", "grpc", true)  // Development
</code></pre>
<p>func (pc <em>ProviderConfig) WithResource(resource </em>sdkresource.Resource) *ProviderConfig
    WithResource sets a custom OpenTelemetry resource for service
    identification. Resources contain attributes that identify the service,
    version, environment, and other metadata. If not provided, a default
    resource will be created automatically using the service name, version,
    and other attributes from the Config.</p>
<pre><code>Example:

    resource, _ := resource.New(ctx,
        resource.WithAttributes(
            semconv.ServiceName("payment-service"),
            semconv.ServiceVersion("v1.2.3"),
            semconv.DeploymentEnvironment("production"),
            attribute.String("region", "us-west-2"),
        ),
    )
    config.WithResource(resource)
</code></pre>
<p>func (pc <em>ProviderConfig) WithSampling(samplingType string, ratio float64) </em>ProviderConfig
    WithSampling configures the sampling strategy and ratio for trace
    collection. Sampling controls what percentage of traces are collected
    and exported, which is crucial for managing overhead in high-traffic
    applications.</p>
<pre><code>Parameters:
  - samplingType: "probabilistic" (ratio-based), "always_on" (100%),
    or "always_off" (0%)
  - ratio: For probabilistic sampling, the ratio of traces to sample (0.0 to
    1.0) Ignored for "always_on" and "always_off" strategies

Example:

    config.WithSampling("probabilistic", 0.01)  // 1% sampling for production
    config.WithSampling("always_on", 0)        // 100% sampling for development
    config.WithSampling("always_off", 0)       // Disable tracing
</code></pre>
<p>type Tracer struct {
    // Has unexported fields.
}
    Tracer wraps OpenTelemetry tracer with convenience methods for easier
    tracing operations. It provides a simplified interface for creating spans,
    adding attributes, and managing trace context while maintaining full
    compatibility with OpenTelemetry standards.</p>
<pre><code>Example usage:

    tracer := otelkit.New("my-service")
    ctx, span := tracer.Start(ctx, "operation-name")
    defer span.End()
    // ... your code here
</code></pre>
<p>func New(name string) *Tracer
    New creates a new Tracer instance with the specified name. The name is used
    to identify the tracer and appears in telemetry data. It's recommended to
    use your service or component name.</p>
<pre><code>Example:

    tracer := otelkit.New("user-service")
    tracer := otelkit.New("payment-processor")
</code></pre>
<p>func (t *Tracer) GetTraceID(ctx context.Context) string
    GetTraceID extracts and returns the trace ID from the current span context.
    Returns an empty string if no valid span is found in the context. This is
    useful for correlation logging and debugging.</p>
<pre><code>Example:

    traceID := tracer.GetTraceID(ctx)
    log.WithField("trace_id", traceID).Info("Processing request")
</code></pre>
<p>func (t *Tracer) OtelTracer() trace.Tracer
    OtelTracer returns the underlying OpenTelemetry tracer instance. This is
    useful when you need direct access to OpenTelemetry APIs or when integrating
    with other OpenTelemetry-compatible libraries.</p>
<pre><code>Example:

    otelTracer := tracer.OtelTracer()
    // Use with other OpenTelemetry libraries
</code></pre>
<p>func (t *Tracer) Start(ctx context.Context, name string, opts ...trace.SpanStartOption) (context.Context, trace.Span)
    Start creates a new span with the given name and options. Returns a new
    context containing the span and the span itself. The span must be ended by
    calling span.End() when the operation completes.</p>
<pre><code>Example:

    ctx, span := tracer.Start(ctx, "database-query")
    defer span.End()
    // ... perform database operation
</code></pre>
<p>func (t *Tracer) StartClientSpan(ctx context.Context, operation string, attrs ...attribute.KeyValue) (context.Context, trace.Span)
    StartClientSpan creates a new client span for outgoing requests or
    operations. This is a convenience method that automatically sets the span
    kind to SpanKindClient and adds the provided attributes. Use this for HTTP
    client requests, gRPC client calls, database queries, external API calls,
    etc.</p>
<pre><code>Example:

    ctx, span := tracer.StartClientSpan(ctx, "call-payment-api",
        attribute.String("http.method", "POST"),
        attribute.String("http.url", "https://api.payment.com/charge"),
    )
    defer span.End()
</code></pre>
<p>func (t *Tracer) StartServerSpan(ctx context.Context, operation string, attrs ...attribute.KeyValue) (context.Context, trace.Span)
    StartServerSpan creates a new server span for incoming requests or
    operations. This is a convenience method that automatically sets the span
    kind to SpanKindServer and adds the provided attributes. Use this for HTTP
    handlers, gRPC server methods, message queue consumers, etc.</p>
<pre><code>Example:

    ctx, span := tracer.StartServerSpan(ctx, "handle-user-request",
        attribute.String("user.id", userID),
        attribute.String("request.method", "POST"),
    )
    defer span.End()
</code></pre>
<p>Generated on Sun Aug 24 06:06:11 UTC 2025</p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>